{% load static %}

<!doctype html>
<html lang="pt-BR">
<head>
  <!-- Define codifica√ß√£o de caracteres -->
  <meta charset="utf-8" />
  <!-- Faz a p√°gina responsiva em dispositivos m√≥veis -->
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="{% static 'midias/fbs_2017.ico' %}">

  <!-- T√≠tulo da aba do navegador -->
  <title>FBS Agro</title>

  <style>
    /* Vari√°veis globais para cores, tamanhos e transi√ß√µes */
    :root{
      --sidebar-collapsed-width:60px;  /* Largura da sidebar quando recolhida */
      --sidebar-expanded-width:240px;  /* Largura da sidebar quando expandida */
      --transition:0.28s;              /* Tempo de transi√ß√£o de anima√ß√µes */
      --bg:#0f172a;                     /* Cor de fundo principal */
      --panel:#0b1220;                  /* Cor de fundo de pain√©is */
      --accent:#4f46e5;                 /* Cor de destaque */
      --muted:#9aa4b2;                  /* Cor de textos secund√°rios */
    }

    /* Reset b√°sico e fonte padr√£o */
    *{
      box-sizing:border-box;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial;
    }

    /* Estilos do body - Aki fica a estiliza√ß√£o do corpo da nossa aplicaca√ß√£o! */
    body{
      margin:0;  /* Remove margens padr√£o */
      background:linear-gradient(180deg,#ffffff 100%, #071427 0%); /* Fundo gradiente */
      /*background-color: #ffffff;*/
      color:#0b1220; /* Cor do texto */
      height:100vh; /* Altura total da tela */
      display:flex; /* Layout flex para sidebar + main */
    }

    /* Sidebar principal */
    .sidebar{
      width:var(--sidebar-expanded-width); /* Largura padr√£o */
      /*background:linear-gradient(90deg,rgb(19, 228, 19) 95%, rgb(228, 228, 228) 0%); /* Fundo gradiente */
      background-color: #189117;
      padding:12px; /* Espa√ßamento interno   */
      display:flex; 
      flex-direction:column; /* Layout vertical */
      gap:8px; /* Espa√ßo entre itens */
      transition:width var(--transition) ease; /* Transi√ß√£o de largura */
      box-shadow:2px 0 12px rgba(2,6,23,0.6); /* Sombra lateral */
      overflow:hidden; /* Esconde conte√∫do que ultrapassar */
    }

    /* Sidebar recolhida */
    .sidebar.collapsed{
      width:var(--sidebar-collapsed-width);
    }

    /* √Årea de marca/logotipo */
    .brand{
      display:flex;
      align-items:center; /* Centraliza verticalmente */
      gap:10px; /* Espa√ßo entre logo e texto */
      padding:8px 6px; /* Espa√ßamento interno */
    }

    .brand .logo{
      width:90%;
      height:200px;
      border-radius:8px; /* Bordas arredondadas */
      /*background:linear-gradient(135deg,var(--accent),rgb(19, 228, 19)); /* Gradiente */
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
    }

    .brand .logo img{
      width: 100%;
      height: 100%;
      border-radius:5px;
      object-fit: contain;
    }

    .brand h1{
      font-size:14px; /* Tamanho do texto */
      margin:0;       /* Remove margem */
    }

    /* Menu principal da sidebar */
    .menu{
      flex:1;          /* Ocupa espa√ßo restante */
      overflow:auto;   /* Scroll se necess√°rio */
      padding-right:6px; /* Espa√ßo interno */
    }

    .menu-group{
      margin-top:6px; /* Espa√ßo entre grupos de menu */
    }

    /* Item de menu */
    .menu-item{
      display:flex;
      align-items:center;
      justify-content:space-between; /* Separa√ß√£o entre label e arrow */
      padding:10px;
      border-radius:8px;
      cursor:pointer;  /* Cursor de m√£ozinha */
      user-select:none; /* N√£o permite sele√ß√£o de texto */
    }

    .menu-item:hover{
      background:rgba(255,255,255,0.02); /* Highlight ao passar mouse */
    }

    .menu-item .label{
      display:flex;
      align-items:center;
      gap:10px; /* Espa√ßo entre √≠cone e texto */
    }

    .menu-item .icon{
      width:28px;
      height:28px;
      border-radius:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(255,255,255,0.03); /* Fundo sutil */
    }

    /* Submenus (itens dentro de menu-item) */
    .submenu{
      margin-top:6px;
      padding-left:44px; /* Indenta submenu */
      display:none; /* Inicialmente escondido */
      flex-direction:column;
      gap:6px;
    }

    .submenu a{
      padding:8px;
      border-radius:6px;
      text-decoration:none;
      color:black;
      font-size:14px;
    }

    .submenu a:hover{
      color:white;
      background:rgba(255,255,255,0.02);
    }

    /* Seta/arrow de menu */
    .arrow{
      transition:transform var(--transition) ease;
    }

    /* Gira arrow quando menu aberto */
    .menu-item.open .arrow{
      transform:rotate(90deg);
    }

    /* √Årea principal de conte√∫do */
    .main{
      flex:1;
      padding:18px;
      overflow:auto;
    }

    /* Cart√µes de conte√∫do */
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:18px;
      border-radius:12px;
      box-shadow:0 6px 20px rgba(2,6,23,0.6);
    }

    /* Barra superior */
    .topbar{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:12px;
    }

    /* Bot√£o de toggle da sidebar */
    .toggle-btn{
      background:transparent;
      border:1px solid rgba(255,255,255,0.04);
      padding:8px;
      border-radius:10px;
      cursor:pointer;
    }

    /* Responsividade */
    @media (max-width:800px){
      .sidebar{
        position:absolute;
        z-index:40;
        height:100vh;
        left:0;
        top:0;
      }
      body{padding-left:0;}
    }

    /* Ajustes quando sidebar recolhida */
    .sidebar.collapsed .brand h1, 
    .sidebar.collapsed .menu-item .text, 
    .sidebar.collapsed .submenu{
      display:none;
    }

    .sidebar.collapsed .menu-item {
      justify-content:center; /* Centraliza √≠cone */
    }

  </style>
</head>

<body>
  <!-- Sidebar lateral -->
  <aside class="sidebar" id="sidebar">
    <!-- Logotipo e marca -->
    <div class="brand">
      <div class="logo">
        <img src="{% static 'logo FBS AGRO.png' %}" alt="logo">
      </div>
    </div>

    <!-- Menu de navega√ß√£o -->
    <nav class="menu" role="navigation" aria-label="Menu principal">
      <div class="menu-group">
        <!-- Item de menu "In√≠cio" -->
        <div class="menu-item" data-action="home" onclick="showScreen('home')">
          <div class="label"><div class="icon">üè†</div><div class="text">In√≠cio</div></div>
          <div class="arrow">‚Ä∫</div>
        </div>

        <!-- Item de menu "Produtos" com submenu -->
        <div class="menu-item" id="m1-toggle" onclick="toggleSub('m1')">
          <div class="label"><div class="icon">üìÅ</div><div class="text">Cadastros</div></div>
          <div class="arrow">‚Ä∫</div>
        </div>
        <div class="submenu" id="m1">
          <a href="#" onclick="showScreen('prod-list');return false">Grupo de Propriedade</a>
          <a href="#" onclick="showScreen('prod-create');return false">Propriedade</a>
          <a href="#" onclick="showScreen('prod-cats');return false">Categorias</a>
        </div>

        <!-- Item de menu "Configura√ß√µes" com submenu -->
        <div class="menu-item" id="m2-toggle" onclick="toggleSub('m2')">
          <div class="label"><div class="icon">‚öôÔ∏è</div><div class="text">Configura√ß√µes</div></div>
          <div class="arrow">‚Ä∫</div>
        </div>
        <div class="submenu" id="m2">
          <a href="#" onclick="showScreen('profile');return false">Perfil</a>
          <a href="#" onclick="showScreen('prefs');return false">Prefer√™ncias</a>
        </div>

        <!-- Item de menu "Relat√≥rios" -->
        <div class="menu-item" onclick="showScreen('reports')">
          <div class="label"><div class="icon">üìä</div><div class="text">Relat√≥rios</div></div>
          <div class="arrow">‚Ä∫</div>
        </div>
      </div>
    </nav>

    <!-- Bot√£o para recolher/expandir sidebar -->
    <div style="margin-top:auto;padding:6px">
      <button class="toggle-btn" id="collapseBtn" onclick="toggleSidebar()">‚áÑ</button>
    </div>
  </aside>

  <!-- √Årea principal de conte√∫do -->
  <main class="main">
    <div class="topbar">
      <!-- Bot√£o de toggle da sidebar no topo -->
      <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞</button>
      <!-- T√≠tulo da tela atual -->
      <h2 id="screen-title">In√≠cio</h2>
    </div>

    <!-- √Årea onde o conte√∫do din√¢mico √© carregado -->
    <section id="screen" class="card">
      <h3>Bem-vindo!</h3>
      <p>Esta √© a tela inicial. Use o menu √† esquerda para abrir outras telas (o conte√∫do aparece aqui).</p>
    </section>
  </main>

  <!-- Scripts JavaScript -->
  <script>
    // Refer√™ncias de elementos
    const sidebar = document.getElementById('sidebar');
    const collapseBtn = document.getElementById('collapseBtn');

    // Alterna recolhimento/expans√£o da sidebar
    function toggleSidebar(){
      sidebar.classList.toggle('collapsed');
    }

    // Alterna exibi√ß√£o de submenu
    function toggleSub(id){
      const sub = document.getElementById(id);
      const toggle = document.getElementById(id + '-toggle') || document.querySelector(`[onclick*="toggleSub('${id}')"]`);
      const isOpen = sub.style.display === 'flex';
      if(isOpen){
        sub.style.display = 'none';
        toggle.classList.remove('open');
      }else{
        sub.style.display = 'flex';
        sub.style.flexDirection = 'column';
        toggle.classList.add('open');
      }
    }

    // Exibe a tela correspondente ao menu clicado
    function showScreen(name){
      const screen = document.getElementById('screen');
      const title = document.getElementById('screen-title');

      // Tela especial: Lista de produtos via Django
      if (name === 'prod-list') {
        title.textContent = 'Grupo de Propriedade';
        fetch('/produtos/')
          .then(response => response.text())
          .then(html => {
            screen.innerHTML = html; // Carrega conte√∫do da view no card
          })
          .catch(error => {
            console.error('Erro ao carregar produtos:', error);
            screen.innerHTML = '<p>Erro ao carregar produtos.</p>';
          });
        return;
      }

      // Outras telas com conte√∫do fixo
      const screens = {
        'home': {title:'In√≠cio', html:`<h3>In√≠cio</h3><p>Conte√∫do da tela inicial.</p>`},
        'prod-create': {title:'Criar Produto', html:`<h3>Criar Produto</h3><p>Formul√°rio de cria√ß√£o.</p>`},
        'prod-cats': {title:'Categorias', html:`<h3>Categorias</h3><p>Gerencie categorias aqui.</p>`},
        'profile': {title:'Perfil', html:`<h3>Perfil</h3><p>Dados do usu√°rio.</p>`},
        'prefs': {title:'Prefer√™ncias', html:`<h3>Prefer√™ncias</h3><p>Ajustes do sistema.</p>`},
        'reports': {title:'Relat√≥rios', html:`<h3>Relat√≥rios</h3><p>Vis√µes e gr√°ficos (placeholder).</p>`}
      };

      const s = screens[name] || {title:'Tela', html:`<h3>${name}</h3><p>Conte√∫do padr√£o.</p>`};
      title.textContent = s.title;
      screen.innerHTML = s.html;

      // Fecha sidebar automaticamente em telas pequenas
      if(window.innerWidth < 800){ sidebar.classList.add('collapsed'); }
    }

    // Atalho de teclado: tecla 'M' alterna sidebar
    window.addEventListener('keydown', e=>{ 
      if(e.key.toLowerCase()==='m'){ toggleSidebar(); } 
    });
  </script>
</body>
</html>
